<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RadioStream Global - Todas las emisoras de fmstream.org</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #4361ee;
            --secondary: #3a0ca3;
            --dark: #1a1c2c;
            --light: #f8f9fa;
            --gray: #6c757d;
            --success: #4cc9f0;
            --favorite: #e63946;
        }
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        body {
            background: linear-gradient(135deg, var(--dark), #2c3e50);
            color: var(--light);
            min-height: 100vh;
            padding: 20px;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        header {
            text-align: center;
            padding: 20px 0;
            margin-bottom: 30px;
        }
        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-bottom: 10px;
        }
        h1 {
            font-size: 2.8rem;
            background: linear-gradient(90deg, var(--primary), var(--success));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }
        .subtitle {
            color: #aab2ff;
            font-size: 1.2rem;
            max-width: 700px;
            margin: 10px auto;
        }
        .search-section {
            background: rgba(30, 33, 58, 0.8);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            border: 1px solid #4a4f9e;
        }
        .search-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }
        @media (max-width: 768px) {
            .search-container {
                grid-template-columns: 1fr;
            }
        }
        .filter-group {
            display: flex;
            flex-direction: column;
        }
        label {
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--success);
        }
        input, select {
            background: rgba(40, 42, 70, 0.8);
            border: 2px solid #4a4f9e;
            border-radius: 15px;
            padding: 14px 20px;
            font-size: 1.1rem;
            color: var(--light);
            transition: all 0.3s ease;
        }
        input:focus, select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.3);
        }
        .main-content {
            display: grid;
            grid-template-columns: 1fr 350px;
            gap: 25px;
        }
        @media (max-width: 1100px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }
        .radio-list {
            background: rgba(30, 33, 58, 0.8);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            overflow: hidden;
            height: 65vh;
            display: flex;
            flex-direction: column;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            border: 1px solid #4a4f9e;
        }
        .list-header {
            padding: 18px 25px;
            background: rgba(26, 28, 44, 0.95);
            border-bottom: 1px solid #373b5e;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .radio-items {
            overflow-y: auto;
            padding: 15px;
            flex-grow: 1;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 15px;
        }
        @media (max-width: 768px) {
            .radio-items {
                grid-template-columns: 1fr;
            }
        }
        .radio-item {
            background: rgba(40, 42, 70, 0.6);
            border-radius: 15px;
            padding: 20px;
            transition: all 0.3s ease;
            border: 1px solid #4a4f9e;
            cursor: pointer;
            position: relative;
        }
        .radio-item:hover {
            background: rgba(50, 53, 90, 0.8);
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }
        .radio-item.active {
            background: rgba(67, 97, 238, 0.2);
            border: 1px solid var(--primary);
        }
        .radio-name {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--success);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .favorite-btn {
            background: none;
            border: none;
            color: var(--gray);
            font-size: 1.2rem;
            cursor: pointer;
            padding: 5px;
            transition: all 0.3s ease;
            z-index: 10;
            position: relative;
        }
        .favorite-btn:hover {
            color: var(--favorite);
            transform: scale(1.1);
        }
        .favorite-btn.favorited {
            color: var(--favorite);
        }
        .radio-location {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #8f94fb;
            margin-bottom: 15px;
        }
        .radio-genres {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 15px;
        }
        .genre-tag {
            background: rgba(76, 201, 240, 0.15);
            color: var(--success);
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
        }
        .player-section {
            background: rgba(30, 33, 58, 0.8);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            border: 1px solid #4a4f9e;
            height: fit-content;
        }
        .now-playing {
            text-align: center;
            margin-bottom: 25px;
        }
        .radio-logo {
            width: 150px;
            height: 150px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 15px;
            margin: 0 auto 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
        }
        .player-controls {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        .control-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
        }
        .control-btn {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            color: white;
        }
        .control-btn:hover {
            transform: scale(1.1);
            background: var(--secondary);
        }
        .volume-control {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        .volume-icon {
            font-size: 1.5rem;
            color: var(--success);
        }
        .volume-slider {
            flex-grow: 1;
            -webkit-appearance: none;
            height: 8px;
            border-radius: 10px;
            background: rgba(76, 201, 240, 0.2);
            outline: none;
        }
        .volume-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--success);
            cursor: pointer;
        }
        .favorites-section {
            margin-top: 30px;
        }
        .favorites-title {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
            color: var(--success);
        }
        .favorites-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        .fav-item {
            background: rgba(40, 42, 70, 0.6);
            border-radius: 10px;
            padding: 12px 15px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .fav-item:hover {
            background: rgba(50, 53, 90, 0.8);
        }
        .fav-name {
            font-weight: 500;
        }
        .fav-location {
            font-size: 0.9rem;
            color: #8f94fb;
        }
        footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
            color: #6b729c;
            font-size: 0.95rem;
        }
        .no-results {
            grid-column: 1 / -1;
            text-align: center;
            padding: 40px;
            color: #8f94fb;
        }
        .empty-player {
            text-align: center;
            color: #8f94fb;
            padding: 40px 20px;
        }
        .empty-player i {
            font-size: 5rem;
            margin-bottom: 20px;
            opacity: 0.5;
        }
        .station-count {
            background: rgba(67, 97, 238, 0.2);
            padding: 3px 10px;
            border-radius: 15px;
            font-size: 0.9rem;
        }
        /* Nuevos estilos para el tutorial */
        .tutorial-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(26, 28, 44, 0.95);
            border: 2px solid var(--primary);
            border-radius: 20px;
            padding: 30px;
            width: 90%;
            max-width: 600px;
            z-index: 1000;
            box-shadow: 0 15px 40px rgba(0,0,0,0.5);
        }
        .tutorial-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        .tutorial-content {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        .tutorial-step {
            display: flex;
            align-items: flex-start;
            gap: 15px;
            padding: 10px;
            border-radius: 10px;
            background: rgba(40, 42, 70, 0.6);
        }
        .tutorial-step i {
            font-size: 1.8rem;
            color: var(--success);
            min-width: 40px;
            text-align: center;
            margin-top: 5px;
        }
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 999;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <i class="fas fa-radio fa-2x" style="color: var(--success);"></i>
                <h1>RadioStream Global</h1>
            </div>
            <p class="subtitle">Todas las emisoras de fmstream.org - Busca por nombre, lugar o género</p>
        </header>

        <section class="search-section">
            <div class="search-container">
                <div class="filter-group">
                    <label for="search-input"><i class="fas fa-search"></i> Buscar emisora</label>
                    <input type="text" id="search-input" placeholder="Escribe el nombre de la radio...">
                </div>
                <div class="filter-group">
                    <label for="location-select"><i class="fas fa-map-marker-alt"></i> Filtrar por lugar</label>
                    <select id="location-select">
                        <option value="all">Todos los lugares</option>
                        <option value="spain">España</option>
                        <option value="uk">Reino Unido</option>
                        <option value="france">Francia</option>
                        <option value="germany">Alemania</option>
                        <option value="usa">Estados Unidos</option>
                        <option value="latin">América Latina</option>
                        <option value="netherlands">Países Bajos</option>
                        <option value="australia">Australia</option>
                        <option value="denmark">Dinamarca</option>
                        <option value="brazil">Brasil</option>
                        <option value="italy">Italia</option>
                    </select>
                </div>
            </div>
            <div class="filter-group">
                <label for="genre-select"><i class="fas fa-music"></i> Filtrar por género</label>
                <select id="genre-select">
                    <option value="all">Todos los géneros</option>
                    <option value="rock">Rock</option>
                    <option value="pop">Pop</option>
                    <option value="news">Noticias</option>
                    <option value="classical">Clásica</option>
                    <option value="eclectic">Ecléctico</option>
                    <option value="sports">Deportes</option>
                    <option value="christian">Cristiana</option>
                    <option value="trance">Trance</option>
                    <option value="variety">Variedades</option>
                    <option value="jazz">Jazz</option>
                    <option value="world">World Music</option>
                    <option value="sertanejo">Sertanejo</option>
                    <option value="electronic">Electrónica</option>
                </select>
            </div>
        </section>

        <div class="main-content">
            <div class="radio-list">
                <div class="list-header">
                    <h2><i class="fas fa-broadcast-tower"></i> Emisoras Disponibles</h2>
                    <span id="radio-count" class="station-count">Mostrando 54 emisoras</span>
                </div>
                <div class="radio-items" id="radio-items">
                    <!-- Las emisoras se cargarán aquí con JavaScript -->
                </div>
            </div>

            <div class="player-section">
                <div class="now-playing">
                    <div class="radio-logo">
                        <i class="fas fa-music"></i>
                    </div>
                    <h2 id="current-radio">Selecciona una emisora</h2>
                    <p id="current-location" class="radio-location">
                        <i class="fas fa-map-marker-alt"></i> <span>No seleccionada</span>
                    </p>
                </div>

                <div class="player-controls">
                    <div class="control-buttons">
                        <button class="control-btn" id="prev-btn">
                            <i class="fas fa-step-backward"></i>
                        </button>
                        <button class="control-btn" id="play-btn">
                            <i class="fas fa-play"></i>
                        </button>
                        <button class="control-btn" id="next-btn">
                            <i class="fas fa-step-forward"></i>
                        </button>
                    </div>
                    
                    <div class="volume-control">
                        <i class="fas fa-volume-up volume-icon"></i>
                        <input type="range" min="0" max="100" value="80" class="volume-slider" id="volume-slider">
                    </div>
                </div>

                <div class="favorites-section">
                    <h3 class="favorites-title">
                        <i class="fas fa-heart"></i> Emisoras Favoritas
                    </h3>
                    <div class="favorites-list" id="favorites-list">
                        <div class="empty-player">
                            <i class="fas fa-star"></i>
                            <p>Guarda tus emisoras favoritas</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <footer>
            <p>RadioStream Global &copy; 2025 | Todas las emisoras de <a href="https://fmstream.org" style="color: var(--success);">fmstream.org</a></p>
            <p>Datos actualizados al 4 de junio de 2025</p>
        </footer>
    </div>

    <!-- Tutorial popup -->
    <div class="overlay" id="tutorial-overlay" style="display: none;"></div>
    <div class="tutorial-popup" id="tutorial-popup" style="display: none;">
        <div class="tutorial-header">
            <h2><i class="fas fa-graduation-cap"></i> Cómo usar RadioStream</h2>
            <button class="control-btn" id="close-tutorial" style="width: 40px; height: 40px;">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="tutorial-content">
            <div class="tutorial-step">
                <i class="fas fa-heart"></i>
                <div>
                    <h3>Agregar a favoritos</h3>
                    <p>Haz clic en el icono del corazón en cualquier emisora para agregarla a tus favoritos. El corazón se pondrá rojo cuando esté guardado.</p>
                </div>
            </div>
            <div class="tutorial-step">
                <i class="fas fa-search"></i>
                <div>
                    <h3>Buscar emisoras</h3>
                    <p>Usa los filtros para buscar emisoras por nombre, ubicación o género musical.</p>
                </div>
            </div>
            <div class="tutorial-step">
                <i class="fas fa-play-circle"></i>
                <div>
                    <h3>Reproducir emisoras</h3>
                    <p>Haz clic en cualquier emisora para comenzar a reproducirla. Usa los controles para pausar, cambiar de emisora o ajustar el volumen.</p>
                </div>
            </div>
            <div class="tutorial-step">
                <i class="fas fa-bookmark"></i>
                <div>
                    <h3>Acceder a favoritos</h3>
                    <p>Tus emisoras favoritas aparecerán en la sección de abajo del reproductor para acceso rápido.</p>
                </div>
            </div>
        </div>
        <button id="got-it-btn" style="margin-top: 20px; background: var(--primary); color: white; border: none; padding: 12px 25px; border-radius: 15px; font-size: 1.1rem; cursor: pointer; display: block; width: 100%;">
            ¡Entendido! Comenzar
        </button>
    </div>

    <script>
        // Datos completos de emisoras de fmstream.org
        const radioStations = [
            // Emisoras internacionales
            {
                id: 1,
                name: "Radio Caroline",
                location: "Maidstone, Kent, United Kingdom",
                genre: ["rock"],
                streamUrl: "https://radio.caroline.stream/radio-caroline",
                logo: "caroline"
            },
            {
                id: 2,
                name: "BBC World Service",
                location: "London, United Kingdom",
                genre: ["news"],
                streamUrl: "https://stream.live.vc.bbcmedia.co.uk/bbc_world_service",
                logo: "bbcworld"
            },
            {
                id: 3,
                name: "NPR News and Talk",
                location: "Washington, DC, USA",
                genre: ["news"],
                streamUrl: "https://npr-ice.streamguys1.com/live.mp3",
                logo: "npr"
            },
            {
                id: 4,
                name: "WNYC - New York Public Radio",
                location: "New York, NY, USA",
                genre: ["news"],
                streamUrl: "https://fm939.wnyc.org/wnycfm",
                logo: "wnyc"
            },
            {
                id: 5,
                name: "BBC Radio 4",
                location: "London, United Kingdom",
                genre: ["news"],
                streamUrl: "https://stream.live.vc.bbcmedia.co.uk/bbc_radio_fourfm",
                logo: "bbc4"
            },
            {
                id: 6,
                name: "BBC Radio 1",
                location: "London, United Kingdom",
                genre: ["pop"],
                streamUrl: "https://stream.live.vc.bbcmedia.co.uk/bbc_radio_one",
                logo: "bbc1"
            },
            {
                id: 7,
                name: "KNBA 90.3",
                location: "Anchorage, AK, Alaska (USA)",
                genre: ["variety"],
                streamUrl: "https://playerservices.streamtheworld.com/api/livestream-redirect/KNBAFMAAC.aac",
                logo: "knba"
            },
            {
                id: 8,
                name: "Celtic Music Radio",
                location: "Glasgow, SC-GCC, United Kingdom",
                genre: ["world"],
                streamUrl: "https://radio.canstream.co.uk:8075/live.mp3",
                logo: "celtic"
            },
            {
                id: 9,
                name: "WMR World Music Radio",
                location: "Randers, mjy, Denmark",
                genre: ["world"],
                streamUrl: "https://streams.radio.co/sd9c4e1e2a/listen",
                logo: "wmr"
            },
            {
                id: 10,
                name: "WHPK 88.5 FM Chicago",
                location: "Chicago, IL, USA",
                genre: ["eclectic"],
                streamUrl: "https://stream.whpk.org:8000/whpk-high",
                logo: "whpk"
            },
            {
                id: 11,
                name: "Haarlem 105",
                location: "Haarlem, nho, Netherlands",
                genre: ["pop"],
                streamUrl: "https://stream.haarlem105.nl/haarlem105",
                logo: "haarlem"
            },
            {
                id: 12,
                name: "Triple R",
                location: "Melbourne, VIC, Australia",
                genre: ["eclectic"],
                streamUrl: "https://stream.rrr.org.au/rrr.mp3",
                logo: "tripler"
            },
            {
                id: 13,
                name: "rbb Radio Eins",
                location: "Berlin, brb, Germany",
                genre: ["eclectic"],
                streamUrl: "https://rbb-radioeins-live.sslcast.addradio.de/rbb/radioeins/live/mp3/128/stream.mp3",
                logo: "radioeins"
            },
            {
                id: 14,
                name: "Bremen Zwei - Sounds",
                location: "Bremen, bre, Germany",
                genre: ["eclectic"],
                streamUrl: "https://rb-bremenzwei-live.sslcast.addradio.de/rb/bremenzwei/live/mp3/128/stream.mp3",
                logo: "bremen"
            },
            {
                id: 15,
                name: "Abiding Radio - Bluegrass Hymns",
                location: "Mesa, USA",
                genre: ["christian"],
                streamUrl: "https://streaming.live365.com/a81360",
                logo: "abiding"
            },
            {
                id: 16,
                name: "1Mix Radio - Trance",
                location: "Douglas, IOM, United Kingdom",
                genre: ["trance"],
                streamUrl: "https://strm112.1.fm/trance_mobile_mp3",
                logo: "1mix"
            },
            {
                id: 17,
                name: "Your Classical MPR",
                location: "Minneapolis, MN, USA",
                genre: ["classical"],
                streamUrl: "https://yourclassical.stream.publicradio.org/yourclassical.mp3",
                logo: "classicalmpr"
            },
            // Emisoras españolas
            {
                id: 18,
                name: "RNE Radio 5 Todo Noticias",
                location: "Madrid, Spain",
                genre: ["news"],
                streamUrl: "https://crtve-ice-edge-2001-fra-eco-cdn.cast.addradio.de/crtve/rne/5/mp3/128/stream.mp3",
                logo: "rne5"
            },
            {
                id: 19,
                name: "RNE Radio Clásica",
                location: "Madrid, Spain",
                genre: ["classical"],
                streamUrl: "https://crtve-ice-edge-2001-fra-eco-cdn.cast.addradio.de/crtve/rne/2/mp3/128/stream.mp3",
                logo: "rneclasica"
            },
            {
                id: 20,
                name: "RNE Radio 3",
                location: "Madrid, Spain",
                genre: ["eclectic"],
                streamUrl: "https://crtve-ice-edge-2001-fra-eco-cdn.cast.addradio.de/crtve/rne/3/mp3/128/stream.mp3",
                logo: "rne3"
            },
            {
                id: 21,
                name: "RNE Radio Nacional",
                location: "Madrid, Spain",
                genre: ["news"],
                streamUrl: "https://crtve-ice-edge-2001-fra-eco-cdn.cast.addradio.de/crtve/rne/1/mp3/128/stream.mp3",
                logo: "rne1"
            },
            {
                id: 22,
                name: "Cadena SER",
                location: "Madrid, Spain",
                genre: ["news"],
                streamUrl: "https://playerservices.streamtheworld.com/api/livestream-redirect/CADENASER_SC",
                logo: "ser"
            },
            {
                id: 23,
                name: "Cope",
                location: "Madrid, Spain",
                genre: ["news"],
                streamUrl: "https://wecast-b03-03.flumotion.com/copesedes/wecast-b03-03.mp3",
                logo: "cope"
            },
            {
                id: 24,
                name: "Onda Cero",
                location: "Madrid, Spain",
                genre: ["news"],
                streamUrl: "https://livefastly-webs.ondacero.es/radio-podcast/mp3/icecast.audio",
                logo: "ondacero"
            },
            {
                id: 25,
                name: "Radio María",
                location: "Madrid, Spain",
                genre: ["christian"],
                streamUrl: "https://dreamsiteradiocp2.com:8010/stream",
                logo: "radiomaria"
            },
            {
                id: 26,
                name: "Los 40",
                location: "Madrid, Spain",
                genre: ["pop"],
                streamUrl: "https://playerservices.streamtheworld.com/api/livestream-redirect/LOS40_SC",
                logo: "los40"
            },
            {
                id: 27,
                name: "Cadena 100",
                location: "Madrid, Spain",
                genre: ["pop"],
                streamUrl: "https://cadena100-cope-rrcast.flumotion.com/cope/cadena100.mp3",
                logo: "cadena100"
            },
            {
                id: 28,
                name: "Kiss FM",
                location: "Madrid, Spain",
                genre: ["pop"],
                streamUrl: "https://kissfm.ondacero.es/kissfm.mp3",
                logo: "kissfm"
            },
            {
                id: 29,
                name: "Cadena Dial",
                location: "Madrid, Spain",
                genre: ["pop"],
                streamUrl: "https://cadena-dial-cope-rrcast.flumotion.com/cope/dial.mp3",
                logo: "cadenadial"
            },
            {
                id: 30,
                name: "Los 40 Classic",
                location: "Madrid, Spain",
                genre: ["pop"],
                streamUrl: "https://los40classic.ondacero.es/los40classic.mp3",
                logo: "los40classic"
            },
            {
                id: 31,
                name: "Radio Andalucía Información",
                location: "Córdoba, Spain",
                genre: ["news"],
                streamUrl: "https://cdnlive.shooowit.net/rtvalive/smil:rai.smil/playlist.m3u8",
                logo: "rai"
            },
            {
                id: 32,
                name: "es Radio",
                location: "Madrid, Spain",
                genre: ["news"],
                streamUrl: "https://esradio-cope-rrcast.flumotion.com/cope/esradio.mp3",
                logo: "esradio"
            },
            {
                id: 33,
                name: "Canal Fiesta Radio",
                location: "Jaén, Spain",
                genre: ["variety"],
                streamUrl: "https://cdnlive.shooowit.net/rtvalive/smil:cfr.smil/playlist.m3u8",
                logo: "canalfiesta"
            },
            {
                id: 34,
                name: "Canal Sur Radio",
                location: "Sevilla, Spain",
                genre: ["variety"],
                streamUrl: "https://cdnlive.shooowit.net/rtvalive/smil:csr.smil/playlist.m3u8",
                logo: "canalsur"
            },
            {
                id: 35,
                name: "Catalunya Ràdio",
                location: "Barcelona, Spain",
                genre: ["news"],
                streamUrl: "https://shoutcast.ccma.cat/ccma/catalunyaradio.mp3",
                logo: "catradio"
            },
            {
                id: 36,
                name: "Rock FM",
                location: "Madrid, Spain",
                genre: ["rock"],
                streamUrl: "https://rockfm-cope-rrcast.flumotion.com/cope/rockfm.mp3",
                logo: "rockfm"
            },
            {
                id: 37,
                name: "Catalunya Música",
                location: "Barcelona, Spain",
                genre: ["classical"],
                streamUrl: "https://shoutcast.ccma.cat/ccma/catalunyamusica.mp3",
                logo: "catmusica"
            },
            {
                id: 38,
                name: "Aragón Radio",
                location: "Huesca, Spain",
                genre: ["news"],
                streamUrl: "https://cartv.streaming.aranova.es/hls/live/aragonradio.m3u8",
                logo: "aragonradio"
            },
            {
                id: 39,
                name: "Catalunya Informació",
                location: "Barcelona, Spain",
                genre: ["news"],
                streamUrl: "https://shoutcast.ccma.cat/ccma/catalunyainformacio.mp3",
                logo: "catinfo"
            },
            {
                id: 40,
                name: "Radio Galega",
                location: "Santiago de Compostela, Spain",
                genre: ["variety"],
                streamUrl: "https://crtvg-rrcast.flumotion.com/crtvg/radiogalega.mp3",
                logo: "radiogalega"
            },
            {
                id: 41,
                name: "i Cat FM",
                location: "Barcelona, Spain",
                genre: ["pop"],
                streamUrl: "https://shoutcast.ccma.cat/ccma/icatfm.mp3",
                logo: "icatfm"
            },
            {
                id: 42,
                name: "RNE Ràdio 4",
                location: "Barcelona, Spain",
                genre: ["news"],
                streamUrl: "https://crtve-ice-edge-2001-fra-eco-cdn.cast.addradio.de/crtve/rne/4/mp3/128/stream.mp3",
                logo: "rne4"
            },
            {
                id: 43,
                name: "Hit FM",
                location: "Palma de Malorca, Spain",
                genre: ["pop"],
                streamUrl: "https://str.radionomy.com/hitfm",
                logo: "hitfm"
            },
            {
                id: 44,
                name: "Europa FM",
                location: "Madrid, Spain",
                genre: ["pop"],
                streamUrl: "https://europa-cope-rrcast.flumotion.com/cope/europafm.mp3",
                logo: "europafm"
            },
            {
                id: 45,
                name: "Radio Solidaria",
                location: "Madrid, Spain",
                genre: ["christian"],
                streamUrl: "https://server2.emitironline.com:8060/;stream.mp3",
                logo: "radiosolidaria"
            },
            {
                id: 46,
                name: "Radio Euskadi",
                location: "San Sebastian, Spain",
                genre: ["news"],
                streamUrl: "https://eitbvod-rr.akamaized.net/eitbradio/radioeuskadi/live/audio/radioeuskadi_hi.mp3",
                logo: "euskadi"
            },
            {
                id: 47,
                name: "Melodía FM",
                location: "San Sebastián de los Reyes, Spain",
                genre: ["pop"],
                streamUrl: "https://melodia.ondacero.es/melodia.mp3",
                logo: "melodia"
            },
            {
                id: 48,
                name: "RAC 1",
                location: "Barcelona, Spain",
                genre: ["news"],
                streamUrl: "https://rac1.radio.orange.es/rac1",
                logo: "rac1"
            },
            {
                id: 49,
                name: "Radio Voz",
                location: "La Coruña, Spain",
                genre: ["news"],
                streamUrl: "https://radiovoz.radiovoz.es/radiovoz.mp3",
                logo: "radiovoz"
            },
            {
                id: 50,
                name: "À Punt Ràdio",
                location: "Valencia, Spain",
                genre: ["variety"],
                streamUrl: "https://crtv.streaming.aranova.es/hls/live/apuntradio.m3u8",
                logo: "apunt"
            },
            // Otras emisoras relevantes
            {
                id: 51,
                name: "Radio Betis",
                location: "Sevilla, Spain",
                genre: ["sports"],
                streamUrl: "https://betisradio.radiovoz.es/betisradio.mp3",
                logo: "betisradio"
            },
            {
                id: 52,
                name: "Loca FM",
                location: "Madrid, Spain",
                genre: ["electronic"],
                streamUrl: "https://streaming.locafm.com:8443/locafm",
                logo: "locafm"
            },
            {
                id: 53,
                name: "Radio Nacional Argentina",
                location: "Buenos Aires, Argentina",
                genre: ["news"],
                streamUrl: "https://sa.mp3.icecast.magma.edge-access.net:7200/sc_rad1",
                logo: "rna"
            },
            {
                id: 54,
                name: "Rádio Nativa FM",
                location: "Sao Paulo, SP, Brazil",
                genre: ["sertanejo"],
                streamUrl: "https://shout24.radios.com.br:8220/stream",
                logo: "nativafm"
            }
        ];

        // Variables globales
        let currentAudio = null;
        let currentStation = null;
        let favorites = JSON.parse(localStorage.getItem('radioFavorites')) || [];
        let filteredStations = [...radioStations];
        let showTutorial = localStorage.getItem('radioTutorial') === null;

        // Elementos DOM
        const radioItems = document.getElementById('radio-items');
        const searchInput = document.getElementById('search-input');
        const locationSelect = document.getElementById('location-select');
        const genreSelect = document.getElementById('genre-select');
        const radioCount = document.getElementById('radio-count');
        const currentRadio = document.getElementById('current-radio');
        const currentLocation = document.getElementById('current-location');
        const playBtn = document.getElementById('play-btn');
        const volumeSlider = document.getElementById('volume-slider');
        const favoritesList = document.getElementById('favorites-list');
        const tutorialPopup = document.getElementById('tutorial-popup');
        const tutorialOverlay = document.getElementById('tutorial-overlay');
        const closeTutorial = document.getElementById('close-tutorial');
        const gotItBtn = document.getElementById('got-it-btn');

        // Inicializar la aplicación
        document.addEventListener('DOMContentLoaded', () => {
            renderRadioList(filteredStations);
            renderFavorites();
            
            // Event listeners
            searchInput.addEventListener('input', filterStations);
            locationSelect.addEventListener('change', filterStations);
            genreSelect.addEventListener('change', filterStations);
            playBtn.addEventListener('click', togglePlay);
            volumeSlider.addEventListener('input', setVolume);
            
            document.getElementById('prev-btn').addEventListener('click', playPrevious);
            document.getElementById('next-btn').addEventListener('click', playNext);
            
            // Tutorial
            closeTutorial.addEventListener('click', closeTutorialPopup);
            gotItBtn.addEventListener('click', closeTutorialPopup);
            
            if (showTutorial) {
                tutorialPopup.style.display = 'block';
                tutorialOverlay.style.display = 'block';
            }
        });

        // Renderizar lista de emisoras
        function renderRadioList(stations) {
            radioItems.innerHTML = '';
            
            if (stations.length === 0) {
                radioItems.innerHTML = `
                    <div class="no-results">
                        <i class="fas fa-search fa-3x"></i>
                        <h3>No se encontraron emisoras</h3>
                        <p>Intenta con otro término de búsqueda o ajusta los filtros</p>
                    </div>
                `;
                radioCount.textContent = "Mostrando 0 emisoras";
                return;
            }
            
            stations.forEach(station => {
                const isFavorite = favorites.includes(station.id);
                const isActive = currentStation && currentStation.id === station.id;
                
                const stationEl = document.createElement('div');
                stationEl.className = `radio-item ${isActive ? 'active' : ''}`;
                stationEl.innerHTML = `
                    <div class="radio-name">
                        ${station.name}
                        <button class="favorite-btn ${isFavorite ? 'favorited' : ''}" 
                                data-id="${station.id}" title="${isFavorite ? 'Quitar de favoritos' : 'Agregar a favoritos'}">
                            <i class="fas ${isFavorite ? 'fa-heart' : 'fa-heart'}"></i>
                        </button>
                    </div>
                    <div class="radio-location">
                        <i class="fas fa-map-marker-alt"></i> ${station.location}
                    </div>
                    <div class="radio-genres">
                        ${station.genre.map(g => `<span class="genre-tag">${g}</span>`).join('')}
                    </div>
                `;
                
                stationEl.addEventListener('click', (e) => {
                    // Evita que se reproduzca al hacer clic en el botón de favoritos
                    if (!e.target.closest('.favorite-btn')) {
                        playStation(station);
                    }
                });
                
                radioItems.appendChild(stationEl);
            });
            
            // Agregar event listeners a los botones de favoritos
            document.querySelectorAll('.favorite-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const stationId = parseInt(btn.getAttribute('data-id'));
                    toggleFavorite(stationId);
                });
            });
            
            radioCount.textContent = `Mostrando ${stations.length} emisoras`;
        }

        // Filtrar emisoras
        function filterStations() {
            const searchTerm = searchInput.value.toLowerCase();
            const locationFilter = locationSelect.value;
            const genreFilter = genreSelect.value;
            
            filteredStations = radioStations.filter(station => {
                // Filtrar por búsqueda
                if (searchTerm && !station.name.toLowerCase().includes(searchTerm)) {
                    return false;
                }
                
                // Filtrar por ubicación
                if (locationFilter !== 'all') {
                    const locationLower = station.location.toLowerCase();
                    switch(locationFilter) {
                        case 'spain': if (!locationLower.includes('spain') && !locationLower.includes('españa')) return false; break;
                        case 'uk': if (!locationLower.includes('united kingdom') && !locationLower.includes('reino unido')) return false; break;
                        case 'france': if (!locationLower.includes('france') && !locationLower.includes('francia')) return false; break;
                        case 'germany': if (!locationLower.includes('germany') && !locationLower.includes('alemania')) return false; break;
                        case 'usa': if (!locationLower.includes('usa') && !locationLower.includes('united states')) return false; break;
                        case 'latin': if (!locationLower.includes('argentina') && !locationLower.includes('mexico') && !locationLower.includes('brasil')) return false; break;
                        case 'netherlands': if (!locationLower.includes('netherlands') && !locationLower.includes('países bajos')) return false; break;
                        case 'australia': if (!locationLower.includes('australia')) return false; break;
                        case 'denmark': if (!locationLower.includes('denmark') && !locationLower.includes('dinamarca')) return false; break;
                        case 'brazil': if (!locationLower.includes('brazil') && !locationLower.includes('brasil')) return false; break;
                        case 'italy': if (!locationLower.includes('italy') && !locationLower.includes('italia')) return false; break;
                    }
                }
                
                // Filtrar por género
                if (genreFilter !== 'all' && !station.genre.includes(genreFilter)) {
                    return false;
                }
                
                return true;
            });
            
            renderRadioList(filteredStations);
        }

        // Reproducir una emisora
        function playStation(station) {
            // Detener reproducción actual
            if (currentAudio) {
                currentAudio.pause();
                currentAudio = null;
            }
            
            // Actualizar UI
            currentStation = station;
            currentRadio.textContent = station.name;
            currentLocation.querySelector('span').textContent = station.location;
            
            // Marcar como activa
            document.querySelectorAll('.radio-item').forEach(el => {
                el.classList.remove('active');
            });
            event.currentTarget.classList.add('active');
            
            // Actualizar botón de reproducción
            playBtn.innerHTML = '<i class="fas fa-pause"></i>';
            
            // Iniciar reproducción
            currentAudio = new Audio(station.streamUrl);
            currentAudio.play()
                .catch(error => {
                    console.error("Error al reproducir:", error);
                    playBtn.innerHTML = '<i class="fas fa-play"></i>';
                    alert("No se pudo conectar a esta emisora. Por favor, intenta con otra.");
                });
            currentAudio.volume = volumeSlider.value / 100;
            
            // Agregar a recientes
            addToRecent(station);
        }

        // Alternar reproducción/pausa
        function togglePlay() {
            if (!currentStation) return;
            
            if (!currentAudio) {
                playStation(currentStation);
                return;
            }
            
            if (currentAudio.paused) {
                currentAudio.play();
                playBtn.innerHTML = '<i class="fas fa-pause"></i>';
            } else {
                currentAudio.pause();
                playBtn.innerHTML = '<i class="fas fa-play"></i>';
            }
        }

        // Establecer volumen
        function setVolume() {
            if (currentAudio) {
                currentAudio.volume = volumeSlider.value / 100;
            }
        }

        // Reproducir emisora anterior
        function playPrevious() {
            if (!currentStation) return;
            
            const currentIndex = filteredStations.findIndex(s => s.id === currentStation.id);
            const prevIndex = (currentIndex - 1 + filteredStations.length) % filteredStations.length;
            playStation(filteredStations[prevIndex]);
        }

        // Reproducir siguiente emisora
        function playNext() {
            if (!currentStation) return;
            
            const currentIndex = filteredStations.findIndex(s => s.id === currentStation.id);
            const nextIndex = (currentIndex + 1) % filteredStations.length;
            playStation(filteredStations[nextIndex]);
        }

        // Agregar a recientes
        function addToRecent(station) {
            // Aquí podrías implementar un historial de recientes
        }

        // Alternar favorito
        function toggleFavorite(stationId) {
            const index = favorites.indexOf(stationId);
            if (index > -1) {
                favorites.splice(index, 1);
            } else {
                favorites.push(stationId);
            }
            localStorage.setItem('radioFavorites', JSON.stringify(favorites));
            
            // Actualizar el botón de favoritos
            const favoriteBtn = document.querySelector(`.favorite-btn[data-id="${stationId}"]`);
            if (favoriteBtn) {
                if (index > -1) {
                    favoriteBtn.classList.remove('favorited');
                    favoriteBtn.title = "Agregar a favoritos";
                } else {
                    favoriteBtn.classList.add('favorited');
                    favoriteBtn.title = "Quitar de favoritos";
                }
            }
            
            renderFavorites();
        }

        // Renderizar favoritos
        function renderFavorites() {
            if (favorites.length === 0) {
                favoritesList.innerHTML = `
                    <div class="empty-player">
                        <i class="fas fa-star"></i>
                        <p>No tienes emisoras favoritas</p>
                        <p>Haz clic en el corazón en una emisora para agregarla</p>
                    </div>
                `;
                return;
            }
            
            favoritesList.innerHTML = '';
            favorites.forEach(favId => {
                const station = radioStations.find(s => s.id === favId);
                if (station) {
                    const favEl = document.createElement('div');
                    favEl.className = 'fav-item';
                    favEl.innerHTML = `
                        <div>
                            <div class="fav-name">${station.name}</div>
                            <div class="fav-location">${station.location}</div>
                        </div>
                        <i class="fas fa-play"></i>
                    `;
                    
                    favEl.addEventListener('click', () => {
                        playStation(station);
                    });
                    
                    favoritesList.appendChild(favEl);
                }
            });
        }
        
        // Cerrar tutorial
        function closeTutorialPopup() {
            tutorialPopup.style.display = 'none';
            tutorialOverlay.style.display = 'none';
            localStorage.setItem('radioTutorial', 'completed');
        }
    </script>
</body>
</html>
