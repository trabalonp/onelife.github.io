<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Archivos Académicos</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Contenedor principal de tu aplicación para encapsular estilos */
        #academic-app {
            /* Estilos de tu aplicación que deben ser independientes de Blogger */
            box-sizing: border-box; /* Asegura que padding y border se incluyan en el tamaño */
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #212529; /* Color de texto general para tu app */
            
            /* Ajustes para el contenedor principal */
            width: 100%;
            max-width: 1400px; /* Limita el ancho máximo para tu contenido */
            margin: 20px auto; /* Centra el contenido y da un pequeño margen superior/inferior */
            border-radius: 16px;
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            background: linear-gradient(135deg, #f5f7fa 0%, #e4edf5 100%); /* Fondo general de tu aplicación */
        }

        /* Reset básico limitado al scope de #academic-app */
        #academic-app * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* Variables CSS ahora dentro del scope de #academic-app */
        #academic-app { /* Aplica variables al propio contenedor o a sus descendientes */
            --primary: #4361ee;
            --secondary: #3f37c9;
            --accent: #4895ef;
            --light: #f8f9fa;
            --dark: #212529;
            --success: #4cc9f0;
            --card-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);
            --transition: all 0.3s ease;
        }

        /* Header Styles */
        #academic-app .app-header {
            background: linear-gradient(to right, var(--primary), var(--secondary));
            color: white;
            padding: 20px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            position: relative;
            z-index: 10;
        }

        #academic-app .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 1.4rem;
            font-weight: 700;
        }

        #academic-app .logo i {
            font-size: 1.8rem;
        }

        #academic-app .nav-controls {
            display: flex;
            gap: 15px;
        }

        #academic-app .nav-btn {
            background: rgba(255, 255, 255, 0.15);
            border: none;
            color: white;
            padding: 10px 16px;
            border-radius: 50px;
            cursor: pointer;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: var(--transition);
            backdrop-filter: blur(4px);
        }

        #academic-app .nav-btn:hover {
            background: rgba(255, 255, 255, 0.25);
            transform: translateY(-2px);
        }

        /* Ajuste para el texto dentro de los botones de navegación */
        #academic-app .nav-btn span {
            white-space: nowrap; /* Evita el salto de línea */
            overflow: hidden;     /* Oculta el texto que se desborda */
            text-overflow: ellipsis; /* Añade puntos suspensivos */
            /* Opcional: reducir font-size ligeramente si es muy largo, clamp es más avanzado */
            /* font-size: clamp(0.9rem, 1.8vw, 1.1rem); */
        }


        /* Main Content Styles */
        #academic-app .content {
            padding: 30px;
            transition: var(--transition);
            background-color: white; /* Asegura el fondo blanco para el contenido principal */
        }

        #academic-app h1 {
            color: var(--secondary);
            margin-bottom: 30px;
            text-align: center;
            font-size: 2.2rem;
            position: relative;
            padding-bottom: 15px;
        }

        #academic-app h1:after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 4px;
            background: linear-gradient(to right, var(--accent), var(--success));
            border-radius: 2px;
        }

        /* Search Styles */
        #academic-app .search-container {
            max-width: 700px;
            margin: 0 auto 40px;
            position: relative;
        }

        #academic-app .search-box {
            display: flex;
            gap: 10px;
        }

        #academic-app .search-box input {
            flex: 1;
            padding: 16px 24px;
            border: 2px solid #e0e0e0;
            border-radius: 50px;
            font-size: 1.1rem;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
            transition: var(--transition);
        }

        #academic-app .search-box input:focus {
            border-color: var(--accent);
            outline: none;
            box-shadow: 0 4px 15px rgba(67, 97, 238, 0.15);
        }

        #academic-app .search-box button {
            background: linear-gradient(to right, var(--primary), var(--accent));
            color: white;
            border: none;
            border-radius: 50px;
            padding: 0 28px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: var(--transition);
            box-shadow: 0 4px 15px rgba(67, 97, 238, 0.3);
        }

        #academic-app .search-box button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 18px rgba(67, 97, 238, 0.4);
        }

        /* Subjects Grid */
        #academic-app .subjects-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        #academic-app .subject-card {
            background: white;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: var(--card-shadow);
            transition: var(--transition);
            cursor: pointer;
            position: relative;
            border: 1px solid #f0f0f0;
        }

        #academic-app .subject-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 25px rgba(0, 0, 0, 0.15);
        }

        #academic-app .subject-icon {
            height: 160px;
            background: linear-gradient(135deg, var(--accent), var(--success));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 3.5rem;
        }

        #academic-app .subject-info {
            padding: 20px;
        }

        /* Ajuste para el título de la asignatura */
        #academic-app .subject-info h3 {
            font-size: clamp(1.1rem, 2.5vw, 1.4rem); /* Ajusta el tamaño de la fuente */
            margin-bottom: 10px;
            color: var(--secondary);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        #academic-app .subject-info p {
            color: #666;
            font-size: 0.95rem;
            margin-bottom: 15px;
            min-height: 60px; /* Asegura un alto mínimo para la descripción */
        }

        #academic-app .file-count {
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--primary);
            font-weight: 600;
            font-size: 0.9rem;
        }

        /* Files List */
        #academic-app .files-container {
            display: none; /* Se mostrará con JavaScript */
            animation: fadeIn 0.4s ease;
        }
        /* Ajuste de margen para el buscador de archivos */
        #academic-app .files-container .search-container {
            margin-bottom: 30px; /* Un poco menos de margen que el principal */
            margin-top: 20px; /* Margen superior para separarlo del título */
        }

        #academic-app .files-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 20px;
        }
        /* Nueva cuadrícula para carpetas */
        #academic-app .folders-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }
        /* Estilos para las tarjetas de carpeta */
        #academic-app .folder-card {
            background: white;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: var(--card-shadow);
            transition: var(--transition);
            cursor: pointer;
            position: relative;
            border: 1px solid #f0f0f0;
            padding: 25px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            min-height: 180px;
        }
        #academic-app .folder-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 25px rgba(0, 0, 0, 0.15);
        }
        #academic-app .folder-card i {
            font-size: 3.5rem;
            color: var(--accent);
            margin-bottom: 15px;
        }
        /* Ajuste para el título de la carpeta */
        #academic-app .folder-card h3 {
            font-size: clamp(1rem, 2.2vw, 1.3rem); /* Ajusta el tamaño de la fuente */
            color: var(--secondary);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            width: 100%; /* Asegura que ocupe todo el ancho disponible para el ellipsis */
        }


        #academic-app .file-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: var(--card-shadow);
            display: flex;
            flex-direction: column;
            transition: var(--transition);
            border-left: 4px solid var(--accent);
        }

        #academic-app .file-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        #academic-app .file-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
        }

        /* Ajuste para el título del archivo */
        #academic-app .file-title {
            font-size: clamp(1rem, 2vw, 1.2rem); /* Ajusta el tamaño de la fuente */
            font-weight: 600;
            color: var(--dark);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            flex: 1; /* Permite que ocupe el espacio disponible y el ellipsis funcione */
            padding-right: 10px; /* Espacio antes de los botones */
        }

        #academic-app .file-actions {
            display: flex;
            gap: 10px;
        }

        #academic-app .view-btn {
            background: var(--primary);
            color: white;
            border: none;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
        }

        #academic-app .view-btn:hover {
            background: var(--secondary);
            transform: scale(1.1);
        }

        /* Estilo para el botón deshabilitado */
        #academic-app .view-btn.disabled-btn {
            background: #ccc; /* Color gris */
            cursor: not-allowed;
            opacity: 0.6;
            transform: none; /* Sin transformación al pasar el ratón */
        }

        #academic-app .view-btn.disabled-btn:hover {
            background: #ccc; /* Mantiene el color gris al pasar el ratón */
        }


        #academic-app .file-description {
            color: #555;
            font-size: 0.95rem;
            margin-bottom: 20px;
            flex-grow: 1; /* Permite que la descripción ocupe el espacio restante */
        }

        #academic-app .file-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: #777;
            font-size: 0.85rem;
            border-top: 1px solid #eee;
            padding-top: 15px;
        }

        /* PDF Viewer */
        #academic-app .pdf-viewer-container {
            position: fixed; /* Ocupa toda la pantalla */
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: white;
            z-index: 9999; /* Asegura que esté por encima de todo */
            display: none; /* Oculto por defecto */
            flex-direction: column;
        }

        #academic-app .pdf-header {
            background: linear-gradient(to right, var(--primary), var(--secondary));
            color: white;
            padding: 18px 30px;
            display: flex;
            align-items: center;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            position: relative;
            z-index: 10;
        }

        #academic-app .back-btn {
            background: none;
            border: none;
            color: white;
            font-size: 1.8rem;
            cursor: pointer;
            padding: 8px 16px 8px 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        #academic-app .back-btn span {
            font-size: 1.1rem;
            font-weight: 500;
        }

        /* Ajuste para el título del PDF en el visor */
        #academic-app .pdf-title {
            flex-grow: 1;
            text-align: center;
            font-size: clamp(1rem, 2.5vw, 1.3rem); /* Ajusta el tamaño de la fuente */
            font-weight: 600;
            padding: 0 20px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        #academic-app .pdf-frame-container {
            flex: 1; /* Hace que el iframe ocupe todo el espacio restante */
            position: relative;
        }

        #academic-app .pdf-viewer {
            width: 100%;
            height: 100%;
            border: none;
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Responsive Design */
        @media (max-width: 992px) {
            #academic-app .subjects-grid {
                grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            }
            
            #academic-app .files-grid {
                grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            }
            #academic-app .folders-grid {
                grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            }
        }

        @media (max-width: 768px) {
            #academic-app .app-header {
                flex-direction: column;
                gap: 15px;
                text-align: center;
                padding: 15px;
            }
            
            #academic-app .search-box {
                flex-direction: column;
            }
            
            #academic-app .search-box button {
                padding: 14px;
                justify-content: center;
            }
            
            #academic-app .subjects-grid {
                grid-template-columns: 1fr;
            }
            
            #academic-app h1 {
                font-size: 1.8rem;
            }
            #academic-app .folder-card {
                min-height: 150px;
            }
        }

        @media (max-width: 480px) {
            #academic-app .content {
                padding: 20px 15px;
            }
            
            #academic-app .files-grid {
                grid-template-columns: 1fr;
            }
            #academic-app .folders-grid {
                grid-template-columns: 1fr;
            }
            
            #academic-app .pdf-title {
                font-size: 1rem;
                padding: 0 10px;
            }
            
            #academic-app .back-btn span {
                display: none; /* Oculta el texto "Volver" en pantallas muy pequeñas */
            }
        }
    </style>
</head>
<body>
    <div id="academic-app">
        <header class="app-header">
            <div class="logo">
                <i class="fas fa-graduation-cap"></i>
                <span>Archivos Académicos</span>
            </div>
            <div class="nav-controls"></div> 
        </header>

        <div class="content">
            <div id="main-page">
                <h1>Explora Mis Asignaturas</h1>
                
                <div class="search-container">
                    <div class="search-box">
                        <input type="text" id="searchInput" placeholder="Buscar asignatura...">
                        <button onclick="filterSubjects()">
                            <i class="fas fa-search"></i>
                            Buscar
                        </button>
                    </div>
                </div>
                
                <div class="subjects-grid" id="subjectsGrid">
                    </div>
            </div>
            
            <div id="files-page" class="files-container">
                <h1 id="subject-title">Contenidos de Asignatura</h1>
                
                <div class="folders-grid" id="foldersGrid">
                    </div>

                <div class="search-container" id="fileSearchContainer" style="display: none;">
                    <div class="search-box">
                        <input type="text" id="fileSearchInput" placeholder="Buscar archivo...">
                        <button onclick="filterFiles()">
                            <i class="fas fa-search"></i>
                            Buscar
                        </button>
                    </div>
                </div>

                <div class="files-grid" id="filesGrid" style="display: none;">
                    </div>
            </div>
        </div>
        
        <div class="pdf-viewer-container" id="pdfViewerContainer">
            <div class="pdf-header">
                <button class="back-btn" onclick="hidePDF()">
                    <i class="fas fa-arrow-left"></i>
                    <span>Volver</span>
                </button>
                <div class="pdf-title" id="pdfTitle">Título del Documento</div>
            </div>
            <div class="pdf-frame-container">
                <iframe id="pdfViewer" class="pdf-viewer" src="" allow="autoplay"></iframe>
            </div>
        </div>
    </div>

    <script>
        // Datos de las asignaturas y archivos
        const subjectsData = [
            {
                id: 'calculo-i',
                title: 'CÁLCULO I',
                icon: 'fas fa-calculator',
                description: 'Fundamentos matemáticos para el análisis de funciones y límites.',
                folders: [
                    {
                        name: 'Temas Teóricos',
                        icon: 'fas fa-book',
                        files: [
                            { 
                                name: 'PDF Completo Ejercicios',
                                description: 'PDF completo de academia optativa', 
                                driveId: '1jo-Kbsi5ZcyxtmPMobwItJGodxCbgwli',
                                date: '11/06/2025',
                                size: '69.9 MB',
                                available: true
                            },
                            { 
                                name: 'Tema 2: Resumen Límites y Continuidad de Funciones de una variable',
                                description: 'Introducción a los límites y continuidad de funciones de una variable.', 
                                driveId: '1VKtRH1CmTpvGHbgtabE7y437fxkNmHMD',
                                date: '09/06/2025',
                                size: '677 KB',
                                available: true
                            },
                            { 
                                name: 'Tema 2: Teoremas de continuidad y derivabilidad', 
                                description: 'Teoremas fundamentales de continuidad y derivabilidad.', 
                                driveId: '1Wjfuz3lNy0f-CY4pWGaSZvNTKrelCv4e',
                                date: '09/06/2025',
                                size: '1.1 MB',
                                available: true
                            },
                            { 
                                name: 'Tema 3: Cálculo integral de funciones de una variable', 
                                description: 'Introducción al cálculo integral de funciones de una variable.', 
                                driveId: '1PTWBsQtDzizN9iL_pc2PRJxuGcoLBpyA',
                                date: '09/06/2025',
                                size: '2.1 MB',
                                available: true
                            },
                            { 
                                name: 'Tema 4: Aplicaciones series de potencias, series de Fourier, ecuaciones diferenciales', 
                                description: 'Aplicaciones de series de potencias, series de Fourier y ecuaciones diferenciales.', 
                                driveId: '1MHiIdBpMmTWO-thqzYVxBmkCk6pnx0OV',
                                date: '09/06/2025',
                                size: '603 KB',
                                available: true
                            }
                        ]
                    },
                    {
                        name: 'Ejercicios',
                        icon: 'fas fa-pencil-alt',
                        files: [
                            { 
                                name: 'Ejercicios Límites y Continuidad', 
                                description: 'Colección de ejercicios resueltos y propuestos para practicar límites.', 
                                driveId: '1VKtRH1CmTpvGHbgtabE7y437fxkNmHMD',
                                date: '09/06/2025',
                                size: '677 KB',
                                available: false
                            },
                            { 
                                name: 'Ejercicios Derivabilidad', 
                                description: 'Colección de ejercicios resueltos y propuestos para practicar derivabilidad.', 
                                driveId: '',
                                date: '09/06/2025',
                                size: '1.1 MB',
                                available: false
                            },
                            { 
                                name: 'Ejercicios Integral de funciones de una variable', 
                                description: 'Colección de ejercicios resueltos y propuestos para practicar el cálculo integral de funciones de una variable.', 
                                driveId: '',
                                date: '09/06/2025',
                                size: '2.1 MB',
                                available: false
                            },
                            { 
                                name: 'Ejercicios Series de potencias, series de Fourier y ecuaciones diferenciales', 
                                description: 'Colección de ejercicios resueltos y propuestos para practicar series de potencias, series de Fourier y ecuaciones diferenciales.', 
                                driveId: '',
                                date: '09/06/2025',
                                size: '603 KB',
                                available: false
                            }
                        ]
                    }
                ]
            },
            {
                id: 'algebra',
                title: 'ÁLGEBRA I',
                icon: 'fas fa-infinity',
                description: 'Estudio de estructuras algebraicas y sus propiedades.',
                folders: [
                    {
                        name: 'Temas Teóricos',
                        icon: 'fas fa-book',
                        files: [
                            { 
                                name: 'Tema 1 Números reales y complejos', 
                                description: 'Apuntes detallados sobre operaciones con números reales y cálculo de complejos.', 
                                driveId: '1rHsqhLSKxNB54zoeMqL8LVkr8mbfWE6d',
                                date: '05/06/2025',
                                size: '311 KB',
                                available: true
                            },
                            { 
                                name: 'Tema 2 Vectores, matrices y tensores', 
                                description: 'Apuntes detallados sobre vectores, matrices y tensores.', 
                                driveId: '1MefpLvEMMFWnxV3kI2hJA4fuLq_duOdo',
                                date: '05/06/2025',
                                size: '835 KB',
                                available: true
                            },
                            { 
                                name: 'Tema 3 Sistemas de ecuaciones y determinantes', 
                                description: 'Apuntes detallados sobre sistemas de ecuaciones y determinantes.', 
                                driveId: '1DrgDPO66eqST0t3iTbUSrrXKUpqgOLXH',
                                date: '05/06/2025',
                                size: '939 KB',
                                available: true
                            },
                            { 
                                name: 'Tema 4 Subespacios vectoriales, bases y coordenadas', 
                                description: 'Apuntes detallados sobre subespacios vectoriales, bases y coordenadas.', 
                                driveId: '1Pn7J0Lk7xdTNPfizuvZiFPFkxZ6RhoZo', 
                                date: '05/06/2025',
                                size: '418 KB',
                                available: true
                            },
                            { 
                                name: 'Tema 5 Transformaciones lineales', 
                                description: 'Apuntes detallados sobre transformaciones lineales.', 
                                driveId: '1Hvc-8CaRwKn2bgk2VWByctIyUYmy3KXC', 
                                date: '05/06/2025',
                                size: '672 KB',
                                available: true
                            },
                            { 
                                name: 'Tema 6 Valores y vectores propios', 
                                description: 'Apuntes detallados sobre valores y vectores propios.', 
                                driveId: '1CPZQCeEgHxt2fNIOzl_Ey7FnxoaljRLz', 
                                date: '05/06/2025',
                                size: '909 KB',
                                available: true
                            },
                            { 
                                name: 'Tema 7 Álgebra lineal numérica', 
                                description: 'Apuntes detallados sobre algebra lineal numérica.', 
                                driveId: '14T4TgM43089rD7ahD_MRx4LJTBn_ZYK5', 
                                date: '05/06/2025',
                                size: '289 KB',
                                available: true
                            }
                        ]
                    },
                    {
                        name: 'Ejercicios Resueltos',
                        icon: 'fas fa-check-circle',
                        files: [
                            { 
                                name: 'EJERCICIOS Tema 1 Números reales y complejos', 
                                description: 'Ejercicios resueltos y propuestos para practicar del Tema 1 Números reales y complejos.', 
                                driveId: '1rHsqhLSKxNB54zoeMqL8LVkr8mbfWE6d',
                                date: '05/06/2025',
                                size: '',
                                available: false
                            },
                            { 
                                name: 'EJERCICIOS Tema 2 Vectores, matrices y tensores', 
                                description: 'Ejercicios resueltos y propuestos para practicar del Tema 2 Vectores, matrices y tensores.', 
                                driveId: '1MefpLvEMMFWnxV3kI2hJA4fuLq_duOdo', 
                                date: '05/06/2025',
                                size: '',
                                available: false
                            },
                            { 
                                name: 'EJERCICIOS Tema 3 Sistemas de ecuaciones y determinantes', 
                                description: 'Ejercicios resueltos y propuestos para practicar del Tema 3 Sistemas de ecuaciones y determinantes.', 
                                driveId: '1DrgDPO66eqST0t3iTbUSrrXKUpqgOLXH',  
                                date: '05/06/2025',
                                size: '',
                                available: false
                            },
                            { 
                                name: 'EJERCICIOS Tema 4 Subespacios vectoriales, bases y coordenadas', 
                                description: 'Ejercicios resueltos y propuestos para practicar del Tema 4 Subespacios vectoriales, bases y coordenadas.', 
                                driveId: '1Pn7J0Lk7xdTNPfizuvZiFPFkxZ6RhoZo', 
                                date: '05/06/2025',
                                size: '',
                                available: false
                            },
                            { 
                                name: 'EJERCICIOS Tema 5 Transformaciones lineales', 
                                description: 'Ejercicios resueltos y propuestos para practicar del Tema 5 Transformaciones lineales.', 
                                driveId: '1Hvc-8CaRwKn2bgk2VWByctIyUYmy3KXC', 
                                date: '05/06/2025',
                                size: '',
                                available: false
                            },
                            { 
                                name: 'EJERCICIOS Tema 6 Valores y vectores propios', 
                                description: 'Ejercicios resueltos y propuestos para practicar del Tema 6 Valores y vectores propios.', 
                                driveId: '1CPZQCeEgHxt2fNIOzl_Ey7FnxoaljRLz', 
                                date: '05/06/2025',
                                size: '',
                                available: false
                            },
                            { 
                                name: 'EJERCICIOS Tema 7 Álgebra lineal numérica', 
                                description: 'Ejercicios resueltos y propuestos para practicar del Tema 7 Álgebra lineal numérica.', 
                                driveId: '14T4TgM43089rD7ahD_MRx4LJTBn_ZYK5', 
                                date: '05/06/2025',
                                size: '',
                                available: false
                            }
                        ]
                    }
                ]
            },
            {
                id: 'probabilidad',
                title: 'PROBABILIDAD',
                icon: 'fas fa-dice',
                description: 'Análisis de eventos aleatorios y modelos probabilísticos.',
                folders: [
                    {
                        name: 'Apuntes',
                        icon: 'fas fa-clipboard',
                        files: [
                            { 
                                name: 'Conceptos Básicos de Probabilidad', 
                                description: 'Definiciones fundamentales, espacio muestral y eventos.', 
                                driveId: '1FCxllhzNUAU7TC1kxMHHQizb_uvSozy4',
                                date: '12/03/2024',
                                size: '1.9 MB',
                                available: true
                            },
                            { 
                                name: 'Variables Aleatorias y Distribuciones', 
                                description: 'Tipos de variables aleatorias y principales distribuciones de probabilidad.', 
                                driveId: '1FCxllhzNUAU7TC1kxMHHQizb_uvSozy4',
                                date: '19/03/2024',
                                size: '2.5 MB',
                                available: false
                            }
                        ]
                    }
                ]
            },
            {
                id: 'estructuras-de-datos',
                title: 'ESTRUCTURAS DE DATOS',
                icon: 'fas fa-database',
                description: 'Estructuras de datos y algoritmos de ordenamiento.',
                folders: [
                    {
                        name: 'Temas Teóricos',
                        icon: 'fas fa-book',
                        files: [
                            { 
                                name: 'Tema 1 Introducción', 
                                description: 'Apuntes detallados sobre estructuras de datos y algoritmos de ordenamiento.', 
                                driveId: '1NKMDySBCeGKN7bVqz3AHSCNlpNXwQEBf',
                                date: '05/06/2025',
                                size: '4.7 MB',
                                available: true
                            }
                        ]
                    },
                    {
                        name: 'Ejercicios Resueltos',
                        icon: 'fas fa-check-circle',
                        files: [
                            { 
                                name: 'EJERCICIOS Tema 1 Introducción', 
                                description: 'Ejercicios resueltos y propuestos para practicar del Tema 1 Introducción.', 
                                driveId: '1NKMDySBCeGKN7bVqz3AHSCNlpNXwQEBf',
                                date: '05/06/2025',
                                size: '',
                                available: false
                            }
                            
                        ]
                    }
                ]
            },
            {
                id: 'fundamento-computadores',
                title: 'FUNDAMENTOS DE COMPUTADORES',
                icon: 'fas fa-microchip',
                description: 'Principios de arquitectura de computadores y sistemas digitales.',
                folders: [
                    {
                        name: 'Exámenes años anteriores',
                        icon: 'fas fa-lightbulb',
                        files: [
                            { 
                                name: 'Examen Junio 2024', 
                                description: '', 
                                driveId: '10Lz9gxl-vZIYwTfn7QGOiqf-ZCpnVO4S',
                                date: '08/06/2024',
                                size: '158 KB',
                                available: true
                            },
                            { 
                                name: 'Examen Mayo 2024', 
                                description: '', 
                                driveId: '16b60CH5o-O-XL-etfHXBPif7NGOTtQiq',
                                date: '08/06/2024',
                                size: '168 KB',
                                available: true
                            },
                            { 
                                name: 'Examen Enero 2023', 
                                description: '', 
                                driveId: '1M5aOym_FUwuxrZqA5g6EcSJZ85Fsugw8',
                                date: '08/06/2024',
                                size: '71 KB',
                                available: true
                            },
                            { 
                                name: 'Examen Enero 2024', 
                                description: '', 
                                driveId: '1eirAgBdAwmt3yubOmIFon8COPGugROIS',
                                date: '08/06/2024',
                                size: '279 KB',
                                available: true
                            },
                            { 
                                name: 'Examen Juino 2023', 
                                description: '', 
                                driveId: '1G40sYwMq8Q3Xxd7SzMKzMhpsCspq2qSX',
                                date: '08/06/2024',
                                size: '121 KB',
                                available: true
                            }
                        ]
                    }
                ]
            },
            {
                id: 'calculo-ii',
                title: 'CÁLCULO II',
                icon: 'fas fa-chart-line',
                description: 'Profundización en cálculo diferencial e integral multivariable.',
                folders: [
                    {
                        name: 'Integración',
                        icon: 'fas fa-calculator',
                        files: [
                            { 
                                name: 'Integrales Indefinidas y Definidas', 
                                description: 'Técnicas de integración y el Teorema Fundamental del Cálculo.', 
                                driveId: '1FCxllhzNUAU7TC1kxMHHQizb_uvSozy4',
                                date: '07/03/2024',
                                size: '2.3 MB',
                                available: true
                            }
                        ]
                    },
                    {
                        name: 'Series y Otros',
                        icon: 'fas fa-stream',
                        files: [
                            { 
                                name: 'Series y Sucesiones', 
                                description: 'Convergencia y propiedades de series y sucesiones numéricas.', 
                                driveId: '1FCxllhzNUAU7TC1kxMHHQizb_uvSozy4',
                                date: '21/03/2024',
                                size: '2.6 MB',
                                available: true
                            }
                        ]
                    }
                ]
            },
            {
                id: 'optimizacion-i',
                title: 'OPTIMIZACIÓN I',
                icon: 'fas fa-bullseye',
                description: 'Métodos para encontrar soluciones óptimas a problemas complejos.',
                folders: [
                    {
                        name: 'Programación',
                        icon: 'fas fa-cogs',
                        files: [
                            { 
                                name: 'Programación Lineal', 
                                description: 'Introducción a la optimización lineal, método simplex.', 
                                driveId: '1FCxllhzNUAU7TC1kxMHHQizb_uvSozy4',
                                date: '14/02/2024',
                                size: '2.4 MB',
                                available: true
                            }
                        ]
                    },
                    {
                        name: 'Temas Avanzados',
                        icon: 'fas fa-flask',
                        files: [
                            { 
                                name: 'Optimización no Lineal', 
                                description: 'Fundamentos de optimización sin restricciones.', 
                                driveId: '1FCxllhzNUAU7TC1kxMHHQizb_uvSozy4',
                                date: '28/02/2024',
                                size: '2.8 MB',
                                available: false
                            }
                        ]
                    }
                ]
            }
        ];

        let currentSubjectFolders = []; // Almacena las carpetas de la asignatura actual
        let currentFolderFiles = [];    // Almacena los archivos de la carpeta actual que se está viendo
        let currentSubjectId = null;    // Almacena el ID de la asignatura actual

        // Inicializar la página
        document.addEventListener('DOMContentLoaded', () => {
            renderSubjects();
            
            // Permitir búsqueda de asignaturas con Enter
            document.getElementById('searchInput').addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    filterSubjects();
                }
            });

            // Permitir búsqueda de archivos con Enter
            document.getElementById('fileSearchInput').addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    filterFiles();
                }
            });

            // Añadir un botón "Volver a Asignaturas"
            const backToSubjectsBtn = document.createElement('button');
            backToSubjectsBtn.className = 'nav-btn';
            backToSubjectsBtn.id = 'backToSubjectsBtn';
            backToSubjectsBtn.innerHTML = '<i class="fas fa-arrow-left"></i> <span>Asignaturas</span>';
            backToSubjectsBtn.style.display = 'none';
            backToSubjectsBtn.onclick = showMainPage;
            document.querySelector('#academic-app .nav-controls').prepend(backToSubjectsBtn); 

            // Añadir un botón "Volver a Carpetas"
            const backToFoldersBtn = document.createElement('button');
            backToFoldersBtn.className = 'nav-btn';
            backToFoldersBtn.id = 'backToFoldersBtn';
            backToFoldersBtn.innerHTML = '<i class="fas fa-folder-open"></i> <span>Carpetas</span>';
            backToFoldersBtn.style.display = 'none';
            backToFoldersBtn.onclick = () => showFilesPage(currentSubjectId); // Vuelve a la vista de carpetas de la asignatura actual
            document.querySelector('#academic-app .nav-controls').prepend(backToFoldersBtn); 
        });

        // Renderizar las asignaturas
        function renderSubjects() {
            const grid = document.getElementById('subjectsGrid');
            grid.innerHTML = '';
            
            subjectsData.forEach(subject => {
                const totalFiles = subject.folders.reduce((count, folder) => count + folder.files.length, 0);
                const card = document.createElement('div');
                card.className = 'subject-card';
                card.innerHTML = `
                    <div class="subject-icon">
                        <i class="${subject.icon}"></i>
                    </div>
                    <div class="subject-info">
                        <h3>${subject.title}</h3>
                        <p>${subject.description}</p>
                        <div class="file-count">
                            <i class="fas fa-file-pdf"></i>
                            <span>${totalFiles} archivos en ${subject.folders.length} carpetas</span>
                        </div>
                    </div>
                `;
                card.addEventListener('click', () => showFilesPage(subject.id));
                grid.appendChild(card);
            });
        }

        // Filtrar asignaturas
        function filterSubjects() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const grid = document.getElementById('subjectsGrid');
            const cards = grid.getElementsByClassName('subject-card');
            let found = false;
            
            for (let card of cards) {
                const title = card.querySelector('h3').textContent.toLowerCase();
                if (title.includes(searchTerm)) {
                    card.style.display = '';
                    found = true;
                } else {
                    card.style.display = 'none';
                }
            }
            
            if (!found && searchTerm) {
                alert('No se encontraron asignaturas que coincidan con su búsqueda.');
            }
        }

        // Mostrar la página de archivos (que ahora muestra carpetas) de una asignatura
        function showFilesPage(subjectId) {
            const subject = subjectsData.find(s => s.id === subjectId);
            if (!subject) return;
            
            currentSubjectId = subjectId; // Guarda el ID de la asignatura actual
            currentSubjectFolders = subject.folders; // Almacena las carpetas de la asignatura actual
            currentFolderFiles = []; // Reinicia los archivos de la carpeta actual
            
            // Ocultar página principal
            document.getElementById('main-page').style.display = 'none';
            
            // Mostrar página de archivos
            const filesPage = document.getElementById('files-page');
            filesPage.style.display = 'block';
            filesPage.style.animation = 'fadeIn 0.4s ease';

            // Mostrar el botón de "Volver a Asignaturas" y ocultar "Volver a Carpetas"
            document.getElementById('backToSubjectsBtn').style.display = 'flex';
            document.getElementById('backToFoldersBtn').style.display = 'none'; // Ocultar al mostrar carpetas

            // Actualizar título
            document.getElementById('subject-title').textContent = `Contenidos de ${subject.title}`;
            
            // Ocultar el buscador de archivos y la cuadrícula de archivos
            document.getElementById('fileSearchContainer').style.display = 'none';
            document.getElementById('filesGrid').style.display = 'none';
            document.getElementById('filesGrid').innerHTML = ''; // Limpiar la cuadrícula de archivos
            
            // Renderizar las carpetas
            renderFolders(currentSubjectFolders);
        }

        // Renderizar las carpetas
        function renderFolders(foldersToRender) {
            const grid = document.getElementById('foldersGrid');
            grid.innerHTML = '';
            grid.style.display = 'grid'; // Asegúrate de que la cuadrícula de carpetas esté visible

            if (foldersToRender.length === 0) {
                grid.innerHTML = '<p style="text-align: center; color: #666; margin-top: 30px;">No se encontraron carpetas en esta asignatura.</p>';
                return;
            }

            foldersToRender.forEach(folder => {
                const card = document.createElement('div');
                card.className = 'folder-card';
                card.innerHTML = `
                    <i class="${folder.icon}"></i>
                    <h3>${folder.name}</h3>
                    <p style="font-size: 0.9em; color: #888;">${folder.files.length} archivos</p>
                `;
                card.addEventListener('click', () => showFolderContents(folder));
                grid.appendChild(card);
            });
        }

        // Mostrar el contenido (archivos) de una carpeta
        function showFolderContents(folder) {
            currentFolderFiles = folder.files; // Almacena los archivos de la carpeta actual
            
            // Ocultar la cuadrícula de carpetas
            document.getElementById('foldersGrid').style.display = 'none';

            // Mostrar el buscador de archivos y la cuadrícula de archivos
            document.getElementById('fileSearchContainer').style.display = 'block';
            document.getElementById('filesGrid').style.display = 'grid';
            document.getElementById('fileSearchInput').value = ''; // Limpiar el input de búsqueda de archivos
            
            // Mostrar el botón "Volver a Carpetas"
            document.getElementById('backToFoldersBtn').style.display = 'flex';
            document.getElementById('backToSubjectsBtn').style.display = 'flex'; // Asegurarse que "Volver a Asignaturas" también esté visible
            
            // Actualizar el título para mostrar la carpeta actual
            const subjectTitle = subjectsData.find(s => s.id === currentSubjectId).title;
            document.getElementById('subject-title').textContent = `${folder.name} (${subjectTitle})`;

            // Renderizar los archivos de esta carpeta
            renderFiles(currentFolderFiles);
        }


        // Renderizar archivos (reutilizable por el filtro)
        function renderFiles(filesToRender) {
            const grid = document.getElementById('filesGrid');
            grid.innerHTML = '';
            
            if (filesToRender.length === 0) {
                grid.innerHTML = '<p style="text-align: center; color: #666; margin-top: 30px;">No se encontraron archivos en esta carpeta.</p>';
                return;
            }

            filesToRender.forEach(file => {
                const card = document.createElement('div');
                card.className = 'file-card';
                card.innerHTML = `
                    <div class="file-header">
                        <div class="file-title">${file.name}</div>
                        <div class="file-actions">
                            <button class="view-btn ${file.available ? '' : 'disabled-btn'}" 
                                    title="${file.available ? 'Ver PDF' : 'No disponible'}">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                    </div>
                    <div class="file-description">${file.description}</div>
                    <div class="file-meta">
                        <div class="file-date"><i class="far fa-calendar"></i> ${file.date}</div>
                        <div class="file-size"><i class="fas fa-weight-hanging"></i> ${file.size}</div>
                    </div>
                `;
                
                // Agregar evento para ver el PDF SOLO si el archivo está disponible
                if (file.available) {
                    card.querySelector('.view-btn').addEventListener('click', (e) => {
                        e.stopPropagation();
                        showPDF(file.driveId, file.name);
                    });
                }
                
                grid.appendChild(card);
            });
        }

        // Función para filtrar archivos dentro de una asignatura
        function filterFiles() {
            const searchTerm = document.getElementById('fileSearchInput').value.toLowerCase();
            
            const filtered = currentFolderFiles.filter(file => 
                file.name.toLowerCase().includes(searchTerm)
            );
            
            renderFiles(filtered); // Renderiza solo los archivos filtrados
        }

        // Mostrar PDF en pantalla completa
        function showPDF(driveId, fileName) {
            const container = document.getElementById('pdfViewerContainer');
            const viewer = document.getElementById('pdfViewer');
            const title = document.getElementById('pdfTitle');
            
            // Configurar el título
            title.textContent = fileName;
            
            // Configurar el visor PDF
            viewer.src = `https://drive.google.com/file/d/${driveId}/preview`;
            
            // Mostrar el contenedor
            container.style.display = 'flex';
        }

        // Ocultar el visor de PDF
        function hidePDF() {
            document.getElementById('pdfViewerContainer').style.display = 'none';
            document.getElementById('pdfViewer').src = ''; // Limpiar el src para detener la carga
        }

        // Volver a la página principal desde los archivos
        function showMainPage() {
            document.getElementById('files-page').style.display = 'none';
            document.getElementById('main-page').style.display = 'block';
            document.getElementById('main-page').style.animation = 'fadeIn 0.4s ease';
            document.getElementById('backToSubjectsBtn').style.display = 'none';
            document.getElementById('backToFoldersBtn').style.display = 'none'; // Asegurarse que también se oculte
            currentSubjectId = null; // Reiniciar el ID de la asignatura actual
        }
    </script>
</body>
</html>